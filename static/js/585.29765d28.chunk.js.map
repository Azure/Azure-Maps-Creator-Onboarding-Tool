{"version":3,"file":"static/js/585.29765d28.chunk.js","mappings":"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","sources":["common/constants.js","common/store/geometry.store.worker.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["export const PATHS = {\n  INDEX: '/',\n  CREATE_MANIFEST: '/create-manifest',\n  EDIT_MANIFEST: '/edit-manifest',\n  PROCESSING: '/processing',\n  CREATE_GEOREFERENCE: '/create-georeference',\n  LAYERS: '/layers',\n  LEVELS: '/levels',\n  INVALID_PATH: '/*',\n};\n\nexport const ROUTE_NAME_BY_PATH = {\n  [PATHS.INDEX]: 'home',\n  [PATHS.CREATE_MANIFEST]: 'create',\n  [PATHS.EDIT_MANIFEST]: 'edit',\n  [PATHS.PROCESSING]: 'processing',\n  [PATHS.CREATE_GEOREFERENCE]: 'create',\n  [PATHS.LAYERS]: 'create',\n  [PATHS.LEVELS]: 'create',\n  [PATHS.INVALID_PATH]: 'redirect',\n};\n\nexport const CONSTANTS = {\n  GEO: {\n    US: {\n      TEXT: 'geography.unitedstates',\n      URL: 'https://us.atlas.microsoft.com',\n    },\n    // remove before moving to github\n    US_TEST: {\n      TEXT: 'geography.unitedstates.test',\n      URL: 'https://us.t-azmaps.azurelbs.com',\n    },\n    EU: {\n      TEXT: 'geography.europe',\n      URL: 'https://eu.atlas.microsoft.com',\n    }\n  }\n};\n\nexport const TRUNCATE_FRACTION_DIGITS = 8;","import { combine, featureCollection, polygon, union } from '@turf/turf';\nimport { TRUNCATE_FRACTION_DIGITS } from 'common/constants';\n\n// almost everything in this file was copied from proj4 package - https://github.com/proj4js.\n// which was working too slow for the number of calculations we needed to perform\n// code here is just a copy-paste of proj4 with minor perf optimizations and unnecessary code cut off\n// translateCoordinateInMetersIntoDegrees function here performs ~10 times faster than original transform function.\n\n// constants copied from https://github.com/proj4js/proj4js/blob/master/lib/constants/values.js\nconst D2R = 0.01745329251994329577;\nconst R2D = 57.29577951308232088;\nconst es = 0.006694379990141316;\nconst SPI = 3.14159265359;\n// default k0 copied from https://github.com/proj4js/proj4js/blob/master/lib/Proj.js\nconst k0 = 1.0;\nconst TWO_PI = Math.PI * 2;\n\nself.onmessage = function({ data }) { // eslint-disable-line no-restricted-globals\n  // wrapped this in try catch to ignore errors thrown by union function\n  // truncating coordinates in unionFixed vastly fixed it, but it still fails sometimes\n  try { postMessage(onMessage(data)); } catch {}\n};\n\nexport function onMessage(data) {\n  const { exteriorLayer, polygonLayers, anchorPoint } = data;\n  const filteredPolygonLayers = polygonLayers.filter((layer) => exteriorLayer.value.includes(layer.name));\n\n  if (filteredPolygonLayers.length === 0) {\n    return null;\n  }\n\n  const geometriesByType = splitPolygons(filteredPolygonLayers, anchorPoint.coordinates);\n  const combinedPolygons = combinePolygons(geometriesByType.polygons);\n  return unionMultiPolygons(geometriesByType.multiPolygons.concat(combinedPolygons));\n}\n\nfunction splitPolygons(polygons, [lon, lat]) {\n  return polygons.reduce((acc, val) => {\n    if (val.geometry.type === 'MultiPolygon') {\n      acc.multiPolygons.push(convertMultiPolygonInMetersToDegrees(val.geometry, [lon, lat]));\n    } else if (val.geometry.type === 'Polygon') {\n      acc.polygons.push(convertPolygonInMetersToDegrees(val.geometry, [lon, lat]));\n    }\n    return acc;\n  }, {\n    multiPolygons: [],\n    polygons: [],\n  });\n}\n\nfunction convertMultiPolygonInMetersToDegrees(polygon, [lon, lat]) {\n  return {\n    type: polygon.type,\n    coordinates: polygon.coordinates.map((coordinates) => (\n      coordinates.map((innerCoordinates) => (\n        innerCoordinates.map(([lonMeters, latMeters]) => translateCoordinateInMetersIntoDegrees(lon, lat, [lonMeters, latMeters]))\n      ))\n    )),\n  };\n}\n\nfunction convertPolygonInMetersToDegrees(polygon, [lon, lat]) {\n  return {\n    type: polygon.type,\n    coordinates: polygon.coordinates.map((coordinates) => (\n      coordinates.map(([lonMeters, latMeters]) => translateCoordinateInMetersIntoDegrees(lon, lat, [lonMeters, latMeters]))\n    )),\n  };\n}\n\nfunction unionMultiPolygons(multiPolygons) {\n  if (multiPolygons.length === 0) {\n    throw new Error('no polygons provided!');\n  }\n  const stack = [...multiPolygons];\n  if (stack.length === 1) {\n    return unionFixed(stack[0], stack[0]).geometry;\n  }\n  while (stack.length > 1) {\n    const firstPolygon = stack.shift();\n    try {\n      stack[0] = unionFixed(stack[0], firstPolygon).geometry;\n    } catch {}\n  }\n\n  return stack[0];\n}\n\n// without truncating it often fails due to bugs in polygon-clipping transitive dependency\nfunction unionFixed(f1, f2) {\n  const polygonsUnion = union(f1, f2);\n  polygonsUnion.geometry.coordinates = truncateRecursively(polygonsUnion.geometry.coordinates);\n  return polygonsUnion;\n}\n\nfunction combinePolygons(polygons) {\n  const collection = featureCollection(polygons.map(p => polygon(p.coordinates)));\n  return combine(collection).features.map((c) => c.geometry);\n}\n\n// this function is simplified version of https://github.com/proj4js/proj4js/blob/master/lib/transform.js\nexport function translateCoordinateInMetersIntoDegrees(lon, lat, meters) {\n  const lat0 = lat * D2R;\n  const long0 = lon * D2R;\n  const { Qn, Zb, cgb, utg } = getConsts(es, k0, lat0);\n\n  let point = {x: meters[0], y: meters[1]};\n  point = inverse(point, long0, Qn, Zb, cgb, utg); // Convert Cartesian to longlat\n\n  point = {\n    x: point.x * R2D,\n    y: point.y * R2D,\n  };\n\n  return [truncateNumber(point.x), truncateNumber(point.y)];\n}\n\nfunction truncateRecursively(coordinates) {\n  if (typeof coordinates === 'number') {\n    return truncateNumber(coordinates);\n  }\n  return coordinates.map(truncateRecursively);\n}\n\nexport function truncateNumber(num) {\n  return parseFloat(num.toFixed(TRUNCATE_FRACTION_DIGITS));\n}\n\n// https://github.com/proj4js/proj4js/blob/master/lib/projections/etmerc.js\nfunction getConsts(es, k0, lat0) {\n  const cgb = [];\n  const cbg = [];\n  const utg = [];\n  const gtu = [];\n\n  const f = es / (1 + Math.sqrt(1 - es));\n  const n = f / (2 - f);\n  let np = n;\n\n  cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n  cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n  np = np * n;\n  cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  cgb[5] = np * (601676 / 22275);\n  cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  const Qn = k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n  gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  utg[5] = np * (-20648693 / 638668800);\n  gtu[5] = np * (212378941 / 319334400);\n\n  const Z = gatg(cbg, lat0);\n  const Zb = -Qn * (Z + clens(gtu, 2 * Z));\n\n  return {\n    Qn,\n    Zb,\n    cgb,\n    utg,\n  };\n}\n\n// https://github.com/proj4js/proj4js/blob/master/lib/common/gatg.js\nfunction gatg(pp, B) {\n  const cos_2B = 2 * Math.cos(2 * B);\n  let i = pp.length - 1;\n  let h1 = pp[i];\n  let h2 = 0;\n  let h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n\n// https://github.com/proj4js/proj4js/blob/master/lib/projections/etmerc.js\nfunction inverse(p, long0, Qn, Zb, cgb, utg) {\n  const a = 6378137;\n  const x0 = 0;\n  const y0 = 0;\n\n  let Ce = (p.x - x0) * (1 / a);\n  let Cn = (p.y - y0) * (1 / a);\n\n  Cn = (Cn - Zb) / Qn;\n  Ce = Ce / Qn;\n\n  let lon;\n  let lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    const tmp = clens_cmplx(utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    const sin_Cn = Math.sin(Cn);\n    const cos_Cn = Math.cos(Cn);\n    const sin_Ce = Math.sin(Ce);\n    const cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + long0);\n    lat = gatg(cgb, Cn);\n  } else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\n// https://github.com/proj4js/proj4js/blob/master/lib/common/sign.js\nfunction sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// https://github.com/proj4js/proj4js/blob/master/lib/common/cosh.js\nfunction cosh(x) {\n  let r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}\n\n// https://github.com/proj4js/proj4js/blob/master/lib/common/clens.js\nfunction clens(pp, arg_r) {\n  const r = 2 * Math.cos(arg_r);\n  let i = pp.length - 1;\n  let hr1 = pp[i];\n  let hr2 = 0;\n  let hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n\n// https://github.com/proj4js/proj4js/blob/master/lib/common/adjust_lon.js\nfunction adjust_lon(x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n\n// https://github.com/proj4js/proj4js/blob/master/lib/common/hypot.js\nfunction hypot(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  const a = Math.max(x, y);\n  const b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n\n// https://github.com/proj4js/proj4js/blob/master/lib/common/sinh.js\nfunction sinh(x) {\n  let r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}\n\n// https://github.com/proj4js/proj4js/blob/master/lib/common/clens_cmplx.js\nfunction clens_cmplx(pp, arg_r, arg_i) {\n  const sin_arg_r = Math.sin(arg_r);\n  const cos_arg_r = Math.cos(arg_r);\n  const sinh_arg_i = sinh(arg_i);\n  const cosh_arg_i = cosh(arg_i);\n  let r = 2 * cos_arg_r * cosh_arg_i;\n  let i = -2 * sin_arg_r * sinh_arg_i;\n  let j = pp.length - 1;\n  let hr = pp[j];\n  let hi1 = 0;\n  let hr1 = 0;\n  let hi = 0;\n  let hr2;\n  let hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [845], function() { return __webpack_require__(9585); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"252b4179\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t585: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkmanifest_tool\"] = self[\"webpackChunkmanifest_tool\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn __webpack_require__.e(845).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["PATHS","D2R","R2D","SPI","TWO_PI","Math","PI","unionFixed","f1","f2","polygonsUnion","union","geometry","coordinates","truncateRecursively","translateCoordinateInMetersIntoDegrees","lon","lat","meters","long0","es","k0","lat0","cgb","cbg","utg","gtu","f","sqrt","n","np","pow","Qn","Z","gatg","Zb","pp","arg_r","hr","r","cos","i","length","hr1","hr2","sin","clens","getConsts","point","x","y","p","a","x0","y0","Ce","Cn","abs","tmp","arg_i","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","sinh","cosh_arg_i","exp","cosh","j","hi1","hi","clens_cmplx","atan","sin_Cn","cos_Cn","sin_Ce","cos_Ce","atan2","max","b","min","hypot","sign","Infinity","inverse","truncateNumber","map","num","parseFloat","toFixed","B","h","cos_2B","h1","h2","self","onmessage","data","postMessage","exteriorLayer","polygonLayers","anchorPoint","filteredPolygonLayers","filter","layer","value","includes","name","geometriesByType","polygons","reduce","acc","val","type","multiPolygons","push","polygon","innerCoordinates","lonMeters","latMeters","convertMultiPolygonInMetersToDegrees","convertPolygonInMetersToDegrees","splitPolygons","combinedPolygons","collection","featureCollection","combine","features","c","combinePolygons","Error","stack","firstPolygon","shift","unionMultiPolygons","concat","onMessage","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","__webpack_exports__","O","deferred","result","chunkIds","fn","priority","notFulfilled","fulfilled","Object","keys","every","key","splice","d","definition","o","defineProperty","enumerable","get","e","chunkId","Promise","all","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","bind","moreModules","runtime","pop","next","then"],"sourceRoot":""}